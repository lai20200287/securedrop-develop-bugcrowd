- name: Configure apt ubuntu.sources
  template:
    src: ubuntu.sources.j2
    dest: /etc/apt/sources.list.d/ubuntu.sources
    mode: "0644"
    owner: root
  notify: update apt cache
  tags:
    - apt

# Remove the obsolete sources.list. On a fresh install,
# this is an empty file with a comment pointing to ubuntu.sources.
- name: Remove obsolete sources.list
  file:
    dest: /etc/apt/sources.list
    state: absent
  notify: update apt cache
  tags:
    - apt

# Ensure apt cache is updated before proceeding, otherwise
# packages may fail to install.
- meta: flush_handlers
